---
title: Calling Angular Component Functions from JavaScript
date: 2020-02-23
---

I recently had to work on an Angular application that used the [Bootstrap library to show a popover](https://getbootstrap.com/docs/4.3/components/popovers/). The popover content needed to have a link that would open up a dialog (using the Dialog component from Angular’s Material library) when clicked.

Putting the weird requirement aside for a moment, this kind of interaction posed a unique technical challenge. There were two things that needed to be done:

1. There would be a button on the UI. Clicking this button would open a popover with a link.
2. Clicking on the link in the popover would open a dialog.

The first part is very straight forward. Create a button and initialise the popover on it. This can be done in the `ngAfterViewInit` lifecycle hook:

```
public ngAfterViewInit(): void {
  $('[data-toggle="popover"]').popover();
}
```

The content of the popover has to be in HTML:

```
<button type="button"
        class="btn btn-primary"
        data-container="body"
        data-toggle="popover"
        data-placement="bottom"
        data-html=true
        data-content="<p>This is a <a href='#' (click)='openDialog()'>link</a> you need to click</p>">

  Popover on top

</button>
```

This doesn't work because the click handler that we attached was interpreted as a string and it doesn’t actually trigger anything on click. This is because we can only call “normal” JavaScript functions from the popover. For example, the following alert would work:

```
data-content =
  `<p>This is a <a href='#' onclick="alert('Thanks for clicking...')">link</a> you need to click</p>`
```

Similarly, we can call a function that would handle the click event. This click handler needs to be accessible to the popover content in the global execution context.


To do this, we first make the following changes in the component:....



Of course this entire problem could have been avoided by not dropping the popover library into an Angular application in the first place. Using a wrapper like [ngx-bootstrap](https://www.npmjs.com/package/ngx-bootstrap) would have been a better option.

However, this is an interesting hack to have in your toolbox if you ever want to hook back into an Angular context from “regular” JavaScript.

(Reference: [https://stackoverflow.com/questions/12709074/how-do-you-explicitly-set-a-new-property-on-window-in-typescript](https://stackoverflow.com/questions/12709074/how-do-you-explicitly-set-a-new-property-on-window-in-typescript))